#TODO switch mklink/ln betwen environments
desc "Removes old .bashrc/.vimrc and .vim files/folders in favour of links towards this folder"
task :install => [:bash_rc,:vim,:fonts,:tmux]

def pwd 
  @pwd = `pwd` unless @pwd
end

task :bash_rc do
  sh "rm -f ~/.bashrc"
  sh "ln -s #{pwd}/.bashrc ~/.bashrc"
  sh "rm -f ~/.inputrc"
  sh "ln -s #{pwd}/.inputrc ~/.inputrc"
end

task :vim do
  sh "rm -rf ~/.*vim*"
  sh "ln -s #{pwd}/vim/vimrc ~/.vimrc"
  sh "ln -s #{pwd}/vim ~/.vim"
  sh "sudo ln -s #{pwd}/git/git-completion.bash /etc/bash_completion.d/git-completion"
end

task :fish do
  sh "ln -s #{pwd}/fish ~/.config/fish"
end

task :tmux do
  sh "ln -s #{pwd}/tmux.conf ~/.tmux.conf"
end

task :fonts do
  sh "rm -rf ~/.fonts"
  sh "sudo ln -s #{pwd}/fonts ~/.fonts"
end

task :clojure do
  sh "export PATH=~/dotfiles/clojure/clj:$PATH"
  sh "sudo ln -s #{pwd}/clojure/completions.clj ~/.completions"
end

namespace :irb do
  desc "Links irbrc to ~/.irbrc"
  task :install do
    sh "del ~/.irbrc" if File.exists? "~/.irbrc"
    sh "mklink \".irbrc\" \"~/.irbrc\""
  end
end
